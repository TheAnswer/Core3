/*
 *	server/zone/objects/tangible/component/Component.cpp generated by engine3 IDL compiler 0.60
 */

#include "Component.h"

#include "server/zone/packets/object/ObjectMenuResponse.h"

#include "server/zone/objects/scene/SceneObject.h"

#include "server/zone/Zone.h"

/*
 *	ComponentStub
 */

Component::Component() : TangibleObject(DummyConstructorParameter::instance()) {
	ManagedObject::_setImplementation(new ComponentImplementation());
	ManagedObject::_getImplementation()->_setStub(this);
}

Component::Component(DummyConstructorParameter* param) : TangibleObject(param) {
}

Component::~Component() {
}


void Component::initializeTransientMembers() {
	if (isNull()) {
		if (!deployed)
			throw ObjectNotDeployedException(this);

		DistributedMethod method(this, 6);

		method.executeWithVoidReturn();
	} else
		((ComponentImplementation*) _getImplementation())->initializeTransientMembers();
}

void Component::fillObjectMenuResponse(ObjectMenuResponse* menuResponse, PlayerCreature* player) {
	if (isNull()) {
		throw ObjectNotLocalException(this);

	} else
		((ComponentImplementation*) _getImplementation())->fillObjectMenuResponse(menuResponse, player);
}

void Component::fillAttributeList(AttributeListMessage* msg, PlayerCreature* object) {
	if (isNull()) {
		throw ObjectNotLocalException(this);

	} else
		((ComponentImplementation*) _getImplementation())->fillAttributeList(msg, object);
}

bool Component::isComponent() {
	if (isNull()) {
		if (!deployed)
			throw ObjectNotDeployedException(this);

		DistributedMethod method(this, 7);

		return method.executeWithBooleanReturn();
	} else
		return ((ComponentImplementation*) _getImplementation())->isComponent();
}

void Component::generateLootStats(const String& lootstring, int level) {
	if (isNull()) {
		if (!deployed)
			throw ObjectNotDeployedException(this);

		DistributedMethod method(this, 8);
		method.addAsciiParameter(lootstring);
		method.addSignedIntParameter(level);

		method.executeWithVoidReturn();
	} else
		((ComponentImplementation*) _getImplementation())->generateLootStats(lootstring, level);
}

bool Component::compare(Component* inCmpo) {
	if (isNull()) {
		if (!deployed)
			throw ObjectNotDeployedException(this);

		DistributedMethod method(this, 9);
		method.addObjectParameter(inCmpo);

		return method.executeWithBooleanReturn();
	} else
		return ((ComponentImplementation*) _getImplementation())->compare(inCmpo);
}

bool Component::hasKey(const String& key) {
	if (isNull()) {
		if (!deployed)
			throw ObjectNotDeployedException(this);

		DistributedMethod method(this, 10);
		method.addAsciiParameter(key);

		return method.executeWithBooleanReturn();
	} else
		return ((ComponentImplementation*) _getImplementation())->hasKey(key);
}

void Component::updateCraftingValues(SceneObject* schematic) {
	if (isNull()) {
		if (!deployed)
			throw ObjectNotDeployedException(this);

		DistributedMethod method(this, 11);
		method.addObjectParameter(schematic);

		method.executeWithVoidReturn();
	} else
		((ComponentImplementation*) _getImplementation())->updateCraftingValues(schematic);
}

void Component::addProperty(const String& attributeName, const float value, const int precision, const String& craftingTitle, const bool hidden) {
	if (isNull()) {
		if (!deployed)
			throw ObjectNotDeployedException(this);

		DistributedMethod method(this, 12);
		method.addAsciiParameter(attributeName);
		method.addFloatParameter(value);
		method.addSignedIntParameter(precision);
		method.addAsciiParameter(craftingTitle);
		method.addBooleanParameter(hidden);

		method.executeWithVoidReturn();
	} else
		((ComponentImplementation*) _getImplementation())->addProperty(attributeName, value, precision, craftingTitle, hidden);
}

float Component::getAttributeValue(String& attributeName) {
	if (isNull()) {
		if (!deployed)
			throw ObjectNotDeployedException(this);

		DistributedMethod method(this, 13);
		method.addAsciiParameter(attributeName);

		return method.executeWithFloatReturn();
	} else
		return ((ComponentImplementation*) _getImplementation())->getAttributeValue(attributeName);
}

int Component::getAttributePrecision(String& attributeName) {
	if (isNull()) {
		if (!deployed)
			throw ObjectNotDeployedException(this);

		DistributedMethod method(this, 14);
		method.addAsciiParameter(attributeName);

		return method.executeWithSignedIntReturn();
	} else
		return ((ComponentImplementation*) _getImplementation())->getAttributePrecision(attributeName);
}

String Component::getAttributeTitle(String& attributeName) {
	if (isNull()) {
		if (!deployed)
			throw ObjectNotDeployedException(this);

		DistributedMethod method(this, 15);
		method.addAsciiParameter(attributeName);

		method.executeWithAsciiReturn(_return_getAttributeTitle);
		return _return_getAttributeTitle;
	} else
		return ((ComponentImplementation*) _getImplementation())->getAttributeTitle(attributeName);
}

bool Component::getAttributeHidden(String& attributeName) {
	if (isNull()) {
		if (!deployed)
			throw ObjectNotDeployedException(this);

		DistributedMethod method(this, 16);
		method.addAsciiParameter(attributeName);

		return method.executeWithBooleanReturn();
	} else
		return ((ComponentImplementation*) _getImplementation())->getAttributeHidden(attributeName);
}

void Component::addProperty(String& attribute, float value, int precision, String& title) {
	if (isNull()) {
		if (!deployed)
			throw ObjectNotDeployedException(this);

		DistributedMethod method(this, 17);
		method.addAsciiParameter(attribute);
		method.addFloatParameter(value);
		method.addSignedIntParameter(precision);
		method.addAsciiParameter(title);

		method.executeWithVoidReturn();
	} else
		((ComponentImplementation*) _getImplementation())->addProperty(attribute, value, precision, title);
}

int Component::getPropertyCount() {
	if (isNull()) {
		if (!deployed)
			throw ObjectNotDeployedException(this);

		DistributedMethod method(this, 18);

		return method.executeWithSignedIntReturn();
	} else
		return ((ComponentImplementation*) _getImplementation())->getPropertyCount();
}

String Component::getProperty(const int j) {
	if (isNull()) {
		if (!deployed)
			throw ObjectNotDeployedException(this);

		DistributedMethod method(this, 19);
		method.addSignedIntParameter(j);

		method.executeWithAsciiReturn(_return_getProperty);
		return _return_getProperty;
	} else
		return ((ComponentImplementation*) _getImplementation())->getProperty(j);
}

bool Component::changeAttributeValue(String& property, float value) {
	if (isNull()) {
		if (!deployed)
			throw ObjectNotDeployedException(this);

		DistributedMethod method(this, 20);
		method.addAsciiParameter(property);
		method.addFloatParameter(value);

		return method.executeWithBooleanReturn();
	} else
		return ((ComponentImplementation*) _getImplementation())->changeAttributeValue(property, value);
}

/*
 *	ComponentImplementation
 */

ComponentImplementation::ComponentImplementation(DummyConstructorParameter* param) : TangibleObjectImplementation(param) {
	_initializeImplementation();
}


ComponentImplementation::~ComponentImplementation() {
}


void ComponentImplementation::finalize() {
}

void ComponentImplementation::_initializeImplementation() {
	_setClassHelper(ComponentHelper::instance());

	_serializationHelperMethod();
}

void ComponentImplementation::_setStub(DistributedObjectStub* stub) {
	_this = (Component*) stub;
	TangibleObjectImplementation::_setStub(stub);
}

DistributedObjectStub* ComponentImplementation::_getStub() {
	return _this;
}

ComponentImplementation::operator const Component*() {
	return _this;
}

TransactionalObject* ComponentImplementation::clone() {
	return (TransactionalObject*) new ComponentImplementation(*this);
}


void ComponentImplementation::lock(bool doLock) {
	_this->lock(doLock);
}

void ComponentImplementation::lock(ManagedObject* obj) {
	_this->lock(obj);
}

void ComponentImplementation::rlock(bool doLock) {
	_this->rlock(doLock);
}

void ComponentImplementation::wlock(bool doLock) {
	_this->wlock(doLock);
}

void ComponentImplementation::wlock(ManagedObject* obj) {
	_this->wlock(obj);
}

void ComponentImplementation::unlock(bool doLock) {
	_this->unlock(doLock);
}

void ComponentImplementation::runlock(bool doLock) {
	_this->runlock(doLock);
}

void ComponentImplementation::_serializationHelperMethod() {
	TangibleObjectImplementation::_serializationHelperMethod();

	_setClassName("Component");

	addSerializableVariable("attributeMap", &attributeMap);
	addSerializableVariable("precisionMap", &precisionMap);
	addSerializableVariable("titleMap", &titleMap);
	addSerializableVariable("hiddenMap", &hiddenMap);
	addSerializableVariable("keyList", &keyList);
}

ComponentImplementation::ComponentImplementation() {
	_initializeImplementation();
	// server/zone/objects/tangible/component/Component.idl(73):  		Logger.setLoggingName("Component");
	Logger::setLoggingName("Component");
}

bool ComponentImplementation::isComponent() {
	// server/zone/objects/tangible/component/Component.idl(91):  		return true;
	return true;
}

bool ComponentImplementation::hasKey(const String& key) {
	// server/zone/objects/tangible/component/Component.idl(99):  
	for (	// server/zone/objects/tangible/component/Component.idl(99):  		for (int i = 0;
	int i = 0;
	i < (&keyList)->size();
 ++i) 	// server/zone/objects/tangible/component/Component.idl(100):  		return 
	if ((&keyList)->get(i) == key)	// server/zone/objects/tangible/component/Component.idl(101):  				return true;
	return true;
	// server/zone/objects/tangible/component/Component.idl(102):  false;
	return false;
}

/*
 *	ComponentAdapter
 */

ComponentAdapter::ComponentAdapter(ComponentImplementation* obj) : TangibleObjectAdapter(obj) {
}

Packet* ComponentAdapter::invokeMethod(uint32 methid, DistributedMethod* inv) {
	Packet* resp = new MethodReturnMessage(0);

	switch (methid) {
	case 6:
		initializeTransientMembers();
		break;
	case 7:
		resp->insertBoolean(isComponent());
		break;
	case 8:
		generateLootStats(inv->getAsciiParameter(_param0_generateLootStats__String_int_), inv->getSignedIntParameter());
		break;
	case 9:
		resp->insertBoolean(compare((Component*) inv->getObjectParameter()));
		break;
	case 10:
		resp->insertBoolean(hasKey(inv->getAsciiParameter(_param0_hasKey__String_)));
		break;
	case 11:
		updateCraftingValues((SceneObject*) inv->getObjectParameter());
		break;
	case 12:
		addProperty(inv->getAsciiParameter(_param0_addProperty__String_float_int_String_bool_), inv->getFloatParameter(), inv->getSignedIntParameter(), inv->getAsciiParameter(_param3_addProperty__String_float_int_String_bool_), inv->getBooleanParameter());
		break;
	case 13:
		resp->insertFloat(getAttributeValue(inv->getAsciiParameter(_param0_getAttributeValue__String_)));
		break;
	case 14:
		resp->insertSignedInt(getAttributePrecision(inv->getAsciiParameter(_param0_getAttributePrecision__String_)));
		break;
	case 15:
		resp->insertAscii(getAttributeTitle(inv->getAsciiParameter(_param0_getAttributeTitle__String_)));
		break;
	case 16:
		resp->insertBoolean(getAttributeHidden(inv->getAsciiParameter(_param0_getAttributeHidden__String_)));
		break;
	case 17:
		addProperty(inv->getAsciiParameter(_param0_addProperty__String_float_int_String_), inv->getFloatParameter(), inv->getSignedIntParameter(), inv->getAsciiParameter(_param3_addProperty__String_float_int_String_));
		break;
	case 18:
		resp->insertSignedInt(getPropertyCount());
		break;
	case 19:
		resp->insertAscii(getProperty(inv->getSignedIntParameter()));
		break;
	case 20:
		resp->insertBoolean(changeAttributeValue(inv->getAsciiParameter(_param0_changeAttributeValue__String_float_), inv->getFloatParameter()));
		break;
	default:
		return NULL;
	}

	return resp;
}

void ComponentAdapter::initializeTransientMembers() {
	((ComponentImplementation*) impl)->initializeTransientMembers();
}

bool ComponentAdapter::isComponent() {
	return ((ComponentImplementation*) impl)->isComponent();
}

void ComponentAdapter::generateLootStats(const String& lootstring, int level) {
	((ComponentImplementation*) impl)->generateLootStats(lootstring, level);
}

bool ComponentAdapter::compare(Component* inCmpo) {
	return ((ComponentImplementation*) impl)->compare(inCmpo);
}

bool ComponentAdapter::hasKey(const String& key) {
	return ((ComponentImplementation*) impl)->hasKey(key);
}

void ComponentAdapter::updateCraftingValues(SceneObject* schematic) {
	((ComponentImplementation*) impl)->updateCraftingValues(schematic);
}

void ComponentAdapter::addProperty(const String& attributeName, const float value, const int precision, const String& craftingTitle, const bool hidden) {
	((ComponentImplementation*) impl)->addProperty(attributeName, value, precision, craftingTitle, hidden);
}

float ComponentAdapter::getAttributeValue(String& attributeName) {
	return ((ComponentImplementation*) impl)->getAttributeValue(attributeName);
}

int ComponentAdapter::getAttributePrecision(String& attributeName) {
	return ((ComponentImplementation*) impl)->getAttributePrecision(attributeName);
}

String ComponentAdapter::getAttributeTitle(String& attributeName) {
	return ((ComponentImplementation*) impl)->getAttributeTitle(attributeName);
}

bool ComponentAdapter::getAttributeHidden(String& attributeName) {
	return ((ComponentImplementation*) impl)->getAttributeHidden(attributeName);
}

void ComponentAdapter::addProperty(String& attribute, float value, int precision, String& title) {
	((ComponentImplementation*) impl)->addProperty(attribute, value, precision, title);
}

int ComponentAdapter::getPropertyCount() {
	return ((ComponentImplementation*) impl)->getPropertyCount();
}

String ComponentAdapter::getProperty(const int j) {
	return ((ComponentImplementation*) impl)->getProperty(j);
}

bool ComponentAdapter::changeAttributeValue(String& property, float value) {
	return ((ComponentImplementation*) impl)->changeAttributeValue(property, value);
}

/*
 *	ComponentHelper
 */

ComponentHelper* ComponentHelper::staticInitializer = ComponentHelper::instance();

ComponentHelper::ComponentHelper() {
	className = "Component";

	DistributedObjectBroker::instance()->registerClass(className, this);
}

void ComponentHelper::finalizeHelper() {
	ComponentHelper::finalize();
}

DistributedObject* ComponentHelper::instantiateObject() {
	return new Component(DummyConstructorParameter::instance());
}

DistributedObjectServant* ComponentHelper::instantiateServant() {
	return new ComponentImplementation(DummyConstructorParameter::instance());
}

DistributedObjectAdapter* ComponentHelper::createAdapter(DistributedObjectStub* obj) {
	DistributedObjectAdapter* adapter = new ComponentAdapter((ComponentImplementation*) obj->_getImplementation());

	obj->_setClassName(className);
	obj->_setClassHelper(this);

	adapter->setStub(obj);

	return adapter;
}

